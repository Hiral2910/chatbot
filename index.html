<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Keyword-Based Chatbot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0A1F44;
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }

    h2 {
      color: #ffffff;
    }

    #chatbox {
      width: 100%;
      max-width: 500px;
      height: 400px;
      border: 1px solid #2E3C6F;
      background: #112B5F;
      overflow-y: auto;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 8px;
    }

    .message {
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 6px;
    }

    .user {
      background-color: #1E3A8A;
      color: #ffffff;
      align-self: flex-end;
    }

    .bot {
      background-color: #2563EB;
      color: #ffffff;
      align-self: flex-start;
    }

    #userInput {
      display: flex;
      width: 100%;
      max-width: 500px;
    }

    #input {
      flex-grow: 1;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #2E3C6F;
      border-right: none;
      border-radius: 8px 0 0 8px;
      background-color: #1C2D5A;
      color: white;
    }

    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: 1px solid #2E3C6F;
      border-radius: 0 8px 8px 0;
      background-color: #3B82F6;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #2563EB;
    }
  </style>
</head>
<body>

  <h2>Tenant Analyzer Chatbot</h2>
  <div id="chatbox"></div>

  <div id="userInput">
    <input type="text" id="input" placeholder="Ask something...">
    <button onclick="sendMessage()">Send</button>
  </div>

  <script>
    const chatbotData = [
      { keywords: ["total environments", "how many environments"], response: "There are 2 total environments." },
      { keywords: ["total user count", "how many users", "number of users"], response: "The total user count is 628." },
      { keywords: ["total licenses in use", "licenses used"], response: "There are 23 total licenses in use." },
      { keywords: ["service plans", "how many service plans"], response: "There are 138 service plans listed." },
      { keywords: ["global admin", "admin accounts", "how many global admins"], response: "There are 37 global admin accounts." },
      { keywords: ["sku ids", "number of skus", "total sku"], response: "There are 54 total SKU IDs." },
      { keywords: ["total consumption", "consumption in mb", "data usage"], response: "Total consumption is 1.204K MB." },
      { keywords: ["total role count", "how many roles", "number of roles"], response: "There are 33 total roles." },
      { keywords: ["unallocated licenses", "how many unallocated"], response: "There are 23 unallocated licenses." },
      { keywords: ["licenses assigned", "assigned licenses"], response: "77 licenses are assigned." },
      { keywords: ["storage consumption", "environment storage", "storage usage"], response: "Both environments show similar storage usage (~600 MB)." },
      { keywords: ["license usage by company", "which company uses licenses"], response: "One company dominates license usage with over 600 users." },
      { keywords: ["percentage of licenses active", "active licenses percent"], response: "Approximately 88.5% of licenses are active." },
      { keywords: ["percentage of licenses expired", "expired licenses percent"], response: "Approximately 11.5% of licenses are expired." },
      { keywords: ["service plans shown", "some service plans"], response: "Some of the service plans include: Project_Ops_Viva, D365_Service_Enterprise, PowerApps_P2, Exchange_S_Standard, M365_E3." },
      { keywords: ["tenant directory plan", "details in directory plan"], response: "The Tenant Directory Plan section includes: Subscription name, Directory name, License type, Object ID, License status, Active service plans, License expiration and assignment." },
      { keywords: ["columns in tenant service plan", "tenant plan data table columns"], response: "Columns include: SKU Part Number, Total Assigned, Enabled, Warning, Expired, Disabled, Expiring Soon, Expired Count." },
      { keywords: ["most assignments", "most assigned sku", "sku with most users"], response: "ACT_PLAN_TRIAL has the most assignments with 3000 assigned." },
      { keywords: ["filter options", "available filters", "filters on left panel"], response: "Filter options include: Tenant Name, Environment Name, License Name." }
    ];

    function sendMessage() {
      const inputField = document.getElementById("input");
      const userMessage = inputField.value.trim();
      if (!userMessage) return;

      displayMessage(userMessage, "user");

      const botResponse = getBotResponse(userMessage);
      displayMessage(botResponse, "bot");

      inputField.value = "";
    }

    function displayMessage(message, sender) {
      const chatbox = document.getElementById("chatbox");
      const messageElem = document.createElement("div");
      messageElem.className = `message ${sender}`;
      messageElem.textContent = `${sender === "user" ? "You" : "Bot"}: ${message}`;
      chatbox.appendChild(messageElem);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function getBotResponse(message) {
      const lowerMessage = message.toLowerCase();
      for (const data of chatbotData) {
        for (const keyword of data.keywords) {
          if (lowerMessage.includes(keyword.toLowerCase())) {
            return data.response;
          }
        }
      }
      return "I'm not sure how to respond to that. Can you rephrase?";
    }
  </script>
</body>
</html>
